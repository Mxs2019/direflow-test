{"ast":null,"code":"import { injectIntoHead } from '../helpers/domControllers';\n\nconst externalLoaderPlugin = (element, plugins, app) => {\n  var _a;\n\n  const plugin = plugins === null || plugins === void 0 ? void 0 : plugins.find(p => p.name === 'external-loader');\n  const paths = (_a = plugin === null || plugin === void 0 ? void 0 : plugin.options) === null || _a === void 0 ? void 0 : _a.paths;\n\n  if (!paths || !paths.length || !app) {\n    return;\n  }\n\n  const scriptTags = [];\n  const styleTags = [];\n  paths.forEach(path => {\n    const actualPath = typeof path === 'string' ? path : path.src;\n    const async = typeof path === 'string' ? false : path.async;\n    const useHead = typeof path === 'string' ? undefined : path.useHead;\n\n    if (actualPath.endsWith('.js')) {\n      const script = document.createElement('script');\n      script.src = actualPath;\n      script.async = !!async;\n\n      if (useHead !== undefined && !useHead) {\n        script.setAttribute('use-head', 'false');\n      } else {\n        script.setAttribute('use-head', 'true');\n      }\n\n      scriptTags.push(script);\n    }\n\n    if (actualPath.endsWith('.css')) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = actualPath;\n\n      if (useHead) {\n        link.setAttribute('use-head', 'true');\n      } else {\n        link.setAttribute('use-head', 'false');\n      }\n\n      styleTags.push(link);\n    }\n  });\n  const insertionPoint = document.createElement('span');\n  insertionPoint.id = 'direflow_external-sources';\n\n  if (!window.externalSourcesLoaded) {\n    window.externalSourcesLoaded = {};\n  }\n\n  scriptTags.forEach(script => {\n    if (script.getAttribute('use-head') === 'true') {\n      injectIntoHead(script);\n    } else {\n      insertionPoint.appendChild(script);\n    }\n\n    window.externalSourcesLoaded[script.src] = {\n      state: 'loading'\n    };\n    script.addEventListener('load', () => {\n      var _a, _b;\n\n      window.externalSourcesLoaded[script.src].state = 'completed';\n      (_b = (_a = window.externalSourcesLoaded[script.src]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  });\n  styleTags.forEach(link => {\n    if (link.getAttribute('use-head') === 'true') {\n      injectIntoHead(link);\n    } else {\n      insertionPoint.appendChild(link);\n    }\n\n    window.externalSourcesLoaded[link.href] = {\n      state: 'loading'\n    };\n    link.addEventListener('load', () => {\n      var _a, _b;\n\n      window.externalSourcesLoaded[link.href].state = 'completed';\n      (_b = (_a = window.externalSourcesLoaded[link.href]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  });\n  return [app, insertionPoint];\n};\n\nexport default externalLoaderPlugin;","map":{"version":3,"names":["injectIntoHead","externalLoaderPlugin","element","plugins","app","_a","plugin","find","p","name","paths","options","length","scriptTags","styleTags","forEach","path","actualPath","src","async","useHead","undefined","endsWith","script","document","createElement","setAttribute","push","link","rel","href","insertionPoint","id","window","externalSourcesLoaded","getAttribute","appendChild","state","addEventListener","_b","callback","call"],"sources":["/Users/maxshaw/Documents/GitHub/direflow-test/node_modules/direflow-component/dist/plugins/externalLoaderPlugin.js"],"sourcesContent":["import { injectIntoHead } from '../helpers/domControllers';\nconst externalLoaderPlugin = (element, plugins, app) => {\n    var _a;\n    const plugin = plugins === null || plugins === void 0 ? void 0 : plugins.find((p) => p.name === 'external-loader');\n    const paths = (_a = plugin === null || plugin === void 0 ? void 0 : plugin.options) === null || _a === void 0 ? void 0 : _a.paths;\n    if (!paths || !paths.length || !app) {\n        return;\n    }\n    const scriptTags = [];\n    const styleTags = [];\n    paths.forEach((path) => {\n        const actualPath = typeof path === 'string' ? path : path.src;\n        const async = typeof path === 'string' ? false : path.async;\n        const useHead = typeof path === 'string' ? undefined : path.useHead;\n        if (actualPath.endsWith('.js')) {\n            const script = document.createElement('script');\n            script.src = actualPath;\n            script.async = !!async;\n            if (useHead !== undefined && !useHead) {\n                script.setAttribute('use-head', 'false');\n            }\n            else {\n                script.setAttribute('use-head', 'true');\n            }\n            scriptTags.push(script);\n        }\n        if (actualPath.endsWith('.css')) {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = actualPath;\n            if (useHead) {\n                link.setAttribute('use-head', 'true');\n            }\n            else {\n                link.setAttribute('use-head', 'false');\n            }\n            styleTags.push(link);\n        }\n    });\n    const insertionPoint = document.createElement('span');\n    insertionPoint.id = 'direflow_external-sources';\n    if (!window.externalSourcesLoaded) {\n        window.externalSourcesLoaded = {};\n    }\n    scriptTags.forEach((script) => {\n        if (script.getAttribute('use-head') === 'true') {\n            injectIntoHead(script);\n        }\n        else {\n            insertionPoint.appendChild(script);\n        }\n        window.externalSourcesLoaded[script.src] = {\n            state: 'loading',\n        };\n        script.addEventListener('load', () => {\n            var _a, _b;\n            window.externalSourcesLoaded[script.src].state = 'completed';\n            (_b = (_a = window.externalSourcesLoaded[script.src]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    });\n    styleTags.forEach((link) => {\n        if (link.getAttribute('use-head') === 'true') {\n            injectIntoHead(link);\n        }\n        else {\n            insertionPoint.appendChild(link);\n        }\n        window.externalSourcesLoaded[link.href] = {\n            state: 'loading',\n        };\n        link.addEventListener('load', () => {\n            var _a, _b;\n            window.externalSourcesLoaded[link.href].state = 'completed';\n            (_b = (_a = window.externalSourcesLoaded[link.href]).callback) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    });\n    return [app, insertionPoint];\n};\nexport default externalLoaderPlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}