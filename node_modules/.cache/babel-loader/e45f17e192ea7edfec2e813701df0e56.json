{"ast":null,"code":"import React from 'react';\nimport { createPortal } from 'react-dom';\n\nconst Portal = props => {\n  const targetElement = props.targetElement;\n  return createPortal(props.children, targetElement);\n};\n\nconst createProxyComponent = options => {\n  const ShadowRoot = props => {\n    const shadowedRoot = options.webComponent.shadowRoot || options.webComponent.attachShadow({\n      mode: options.mode\n    });\n    options.shadowChildren.forEach(child => {\n      shadowedRoot.appendChild(child);\n    });\n    return React.createElement(Portal, {\n      targetElement: shadowedRoot\n    }, props.children);\n  };\n\n  return ShadowRoot;\n};\n\nconst componentMap = new WeakMap();\n\nconst createProxyRoot = (webComponent, shadowChildren) => {\n  return new Proxy({\n    open: null,\n    closed: null\n  }, {\n    get(_, mode) {\n      if (componentMap.get(webComponent)) {\n        return componentMap.get(webComponent);\n      }\n\n      const proxyComponent = createProxyComponent({\n        webComponent,\n        mode,\n        shadowChildren\n      });\n      componentMap.set(webComponent, proxyComponent);\n      return proxyComponent;\n    }\n\n  });\n};\n\nexport default createProxyRoot;","map":{"version":3,"names":["React","createPortal","Portal","props","targetElement","children","createProxyComponent","options","ShadowRoot","shadowedRoot","webComponent","shadowRoot","attachShadow","mode","shadowChildren","forEach","child","appendChild","createElement","componentMap","WeakMap","createProxyRoot","Proxy","open","closed","get","_","proxyComponent","set"],"sources":["/Users/maxshaw/Documents/GitHub/direflow-test/node_modules/direflow-component/dist/helpers/proxyRoot.js"],"sourcesContent":["import React from 'react';\nimport { createPortal } from 'react-dom';\nconst Portal = (props) => {\n    const targetElement = props.targetElement;\n    return createPortal(props.children, targetElement);\n};\nconst createProxyComponent = (options) => {\n    const ShadowRoot = (props) => {\n        const shadowedRoot = options.webComponent.shadowRoot\n            || options.webComponent.attachShadow({ mode: options.mode });\n        options.shadowChildren.forEach((child) => {\n            shadowedRoot.appendChild(child);\n        });\n        return React.createElement(Portal, { targetElement: shadowedRoot }, props.children);\n    };\n    return ShadowRoot;\n};\nconst componentMap = new WeakMap();\nconst createProxyRoot = (webComponent, shadowChildren) => {\n    return new Proxy({ open: null, closed: null }, {\n        get(_, mode) {\n            if (componentMap.get(webComponent)) {\n                return componentMap.get(webComponent);\n            }\n            const proxyComponent = createProxyComponent({ webComponent, mode, shadowChildren });\n            componentMap.set(webComponent, proxyComponent);\n            return proxyComponent;\n        },\n    });\n};\nexport default createProxyRoot;\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,WAA7B;;AACA,MAAMC,MAAM,GAAIC,KAAD,IAAW;EACtB,MAAMC,aAAa,GAAGD,KAAK,CAACC,aAA5B;EACA,OAAOH,YAAY,CAACE,KAAK,CAACE,QAAP,EAAiBD,aAAjB,CAAnB;AACH,CAHD;;AAIA,MAAME,oBAAoB,GAAIC,OAAD,IAAa;EACtC,MAAMC,UAAU,GAAIL,KAAD,IAAW;IAC1B,MAAMM,YAAY,GAAGF,OAAO,CAACG,YAAR,CAAqBC,UAArB,IACdJ,OAAO,CAACG,YAAR,CAAqBE,YAArB,CAAkC;MAAEC,IAAI,EAAEN,OAAO,CAACM;IAAhB,CAAlC,CADP;IAEAN,OAAO,CAACO,cAAR,CAAuBC,OAAvB,CAAgCC,KAAD,IAAW;MACtCP,YAAY,CAACQ,WAAb,CAAyBD,KAAzB;IACH,CAFD;IAGA,OAAOhB,KAAK,CAACkB,aAAN,CAAoBhB,MAApB,EAA4B;MAAEE,aAAa,EAAEK;IAAjB,CAA5B,EAA6DN,KAAK,CAACE,QAAnE,CAAP;EACH,CAPD;;EAQA,OAAOG,UAAP;AACH,CAVD;;AAWA,MAAMW,YAAY,GAAG,IAAIC,OAAJ,EAArB;;AACA,MAAMC,eAAe,GAAG,CAACX,YAAD,EAAeI,cAAf,KAAkC;EACtD,OAAO,IAAIQ,KAAJ,CAAU;IAAEC,IAAI,EAAE,IAAR;IAAcC,MAAM,EAAE;EAAtB,CAAV,EAAwC;IAC3CC,GAAG,CAACC,CAAD,EAAIb,IAAJ,EAAU;MACT,IAAIM,YAAY,CAACM,GAAb,CAAiBf,YAAjB,CAAJ,EAAoC;QAChC,OAAOS,YAAY,CAACM,GAAb,CAAiBf,YAAjB,CAAP;MACH;;MACD,MAAMiB,cAAc,GAAGrB,oBAAoB,CAAC;QAAEI,YAAF;QAAgBG,IAAhB;QAAsBC;MAAtB,CAAD,CAA3C;MACAK,YAAY,CAACS,GAAb,CAAiBlB,YAAjB,EAA+BiB,cAA/B;MACA,OAAOA,cAAP;IACH;;EAR0C,CAAxC,CAAP;AAUH,CAXD;;AAYA,eAAeN,eAAf"},"metadata":{},"sourceType":"module"}